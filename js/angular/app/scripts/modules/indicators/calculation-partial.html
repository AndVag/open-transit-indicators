<div class="calculation-heading">
    <span ng-if="!statusFetched" class="calculation-description">
        {{ 'CALCULATION.OBTAINING' | translate }}
    </span>
    <span ng-if="statusFetched && jobStatus" class="calculation-description">
        {{ 'CALCULATION.STATUS' | translate }} -
        {{ displayStatus | translate }}
    </span>
    <span ng-if="statusFetched && !jobStatus" class="calculation-description">
        {{ 'CALCULATION.EMPTY' | translate }}
    </span>
    <span ng-if="statusFetched && (!jobStatus || currentJob.job_status !== 'processing')"
         ng-click="calculateIndicators()" class="button--calculate">
      {{ 'UI.BUTTON.CALCULATE_INDICATORS' | translate }}
    </span>
</div>
<div class="calculation-table">
  <table ng-if="allTimeCalculations !== null">
    <thead>
      <tr>
        <th></th>
        <th><ANY translate>CALCULATION.ALL_TIME</ANY></th>
      </tr>
    </thead>
    <tbody>
        <tr ng-repeat="(indicator, calc) in allTimeCalculations" class="calculation-row">
          <td class="indicators-label calculation-status">{{ types[indicator] }}</td>
            <td>
                <span ng-if="calc.status === 'processing'" class="glyphicon glyphicon-flash"></span>
                <span ng-if="calc.status === 'complete'" class="glyphicon glyphicon-ok"></span>
                <span ng-if="calc.status === 'error'" class="glyphicon glyphicon-remove"></span>
                <span class="label label-danger" ng-if="calc[period].msg != ''">{{ calc[period].msg }}</span>
            </td>
        </tr>
    </tbody>
  </table>
  <table ng-if="periodicCalculations.length !== null">
    <thead>
      <tr>
        <th></th>
        <th><ANY translate>CALCULATION.MORNING</ANY></th>
        <th><ANY translate>CALCULATION.MIDDAY</ANY></th>
        <th><ANY translate>CALCULATION.EVENING</ANY></th>
        <th><ANY translate>CALCULATION.NIGHT</ANY></th>
        <th><ANY translate>CALCULATION.WEEKEND</ANY></th>
      </tr>
    </thead>
    <tbody>
        <tr ng-repeat="(indicator, calc) in periodicCalculations" class="calculation-row">
            <td class="calculation-status {{ calc[period].status }}">{{ types[indicator] }}</td>
            <td ng-repeat="period in periods">
                <span ng-if="calc[period].status === 'processing'" class="glyphicon glyphicon-flash"></span>
                <span ng-if="calc[period].status === 'complete'" class="glyphicon glyphicon-ok"></span>
                <span ng-if="calc[period].status === 'error'" class="glyphicon glyphicon-remove"></span>
                <span class="label label-danger" ng-if="calc[period].msg != ''">{{ calc[period].msg }}</span>
            </td>
        </tr>
    </tbody>
  </table>
</div>
