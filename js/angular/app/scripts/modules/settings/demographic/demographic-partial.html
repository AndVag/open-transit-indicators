<div ng-init="init()">
    <h1>Demographic</h1>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam a ipsum suscipit, lacinia lectus vitae, iaculis nisl. Ut et nisi egestas, vehicula mi sodales, convallis lectus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Fusce eget euismod magna, in aliquam est. Etiam ac lobortis neque. Quisque congue ipsum non mauris lacinia, non adipiscing leo adipiscing.</p>

    <polling-upload url="/api/demographics/" upload="uploadDemographic" resource="DemographicUpload" options="demographicsOptions">
    </polling-upload>

    <div class="dropzone notices" ng-if="uploadProblems.warnings.length > 0 || uploadProblems.errors.length > 0">
        <div class="settingsmodal-notices" ng-if="uploadProblems.errors.length > 0">
            <div class="settingsmodal-notices-errors">
                <h4>Errors</h4>
                <ul>
                    <li ng-repeat="problem in uploadProblems.errors">{{ problem.description }}</li>
                </ul>
            </div>
        </div>
        <div class="settingsmodal-notices-warnings" ng-if="uploadProblems.warnings.length > 0">
            <h4>Warnings</h4>
            <ul>
                <li ng-repeat="problem in uploadProblems.warnings">{{ problem.description }}</li>
            </ul>
        </div>
    </div>

    <div class="dropzone" ng-show="uploadDemographic && uploadDemographic.is_processed">
        <h3>Demographic Data: {{ upload.source_file }}</h3>
        <h3>Assign Fields</h3>
        <h4>Population</h4>
        <div class="settingsmodal-fieldgroup">
            <div class="row">
                <div class="col-sm-4">
                    <p>Population Metric 1:</p>
                </div>
                <div class="col-sm-4">
                    <select ng-model="assign.pop_metric_1" name="pop_metric_1" required="true" ng-options="metric for metric in uploadDemographic.fields"></select>
                </div>
                <div class="col-sm-4"></div>
            </div>
        </div>
        <div class="settingsmodal-fieldgroup">
            <div class="row">
                <div class="col-sm-4">
                    <p>Population Metric 2:</p>
                </div>
                <div class="col-sm-4">
                    <select ng-model="assign.pop_metric_2" name="pop_metric_2" required="true" ng-options="metric for metric in uploadDemographic.fields"></select>
                </div>
            <div class="col-sm-4"></div>
        </div>
        <h4>Demographic</h4>
        <div class="settingsmodal-fieldgroup">
            <div class="row">
                <div class="col-sm-4">
                <p>Demographic Metric:
                </div>
                <div class="col-sm-4">
                    <select ng-model="assign.dest_metric_1" name="demo_metric_1" required="true" ng-options="metric for metric in uploadDemographic.fields"></select>
                </div>
                <div class="col-sm-4"></div>
            </div>
        </div>
        <div class="settingsmodal-fieldgroup">
            <button class="btn btn-primary" ng-click="save()">Save</button>
        </div>
        <div class="settingsmodal-fieldgroup">
            <alert ng-show="loadAlert" type="loadAlert.type">{{ loadAlert.msg }}</alert>
        </div>
    </div>
</div>
